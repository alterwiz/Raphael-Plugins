!function(){"use strict";function t(t,e,n){var r=this.node.getAttribute("transform"),a="",i="scale("+e+" "+n+")";a=r?-1===r.indexOf("scale(")?r+" "+i:r.replace(/scale\(-?[0-9]*?\.?[0-9]*?\ -?[0-9]*?\.?[0-9]*?\)/,i):i,this.node.setAttribute("transform",a)}function e(t,e){var n=this.node.getAttribute("transform"),r="",a="rotate("+e+")";r=n?-1===n.indexOf("rotate(")?n+" "+a:n.replace(/rotate\(-?[0-9]+(\.[0-9][0-9]*)?\)/,a):a,this.node.setAttribute("transform",r)}function n(t,e,n){var r=this.node.getAttribute("transform"),a="",i="translate("+e+" "+n+")";a=r?-1===r.indexOf("translate(")?r+" "+i:r.replace(/translate\(-?[0-9]*?\.?[0-9]*?\ -?[0-9]*?\.?[0-9]*?\)/,i):i,this.node.setAttribute("transform",a)}function r(t,e,n){t.lx=e*this.dragSpeed+t.ox,t.ly=n*this.dragSpeed+t.oy,this.translate(t.lx,t.ly)}function a(t){if(this.node.hasAttribute("transform")){var e=this.node.getAttribute("transform").match(/translate\(([^)]*)\)/);if(e&&void 0!==e[1]){var n=e[1].split(" ");t.ox=parseInt(n[0]),t.oy=parseInt(n[1])}}}function i(t){t.ox=t.lx,t.oy=t.ly}function s(t,e){var n;if("set"===e.type)for(n=0;n<e.length;n++)s.apply(this,[t,e[n]]);else this.node.appendChild(e.node),this.set.push(e)}function o(o,u){var d=o.raphael.vml?document.createElement("group"):document.createElementNS("http://www.w3.org/2000/svg","g");o.canvas.appendChild(d),this.set=o.set(u),this.dragSpeed=1,this.node=d,this.type="group";var l={lx:0,ly:0,ox:0,oy:0};l.onMove=r.bind(this,l),l.onStart=a.bind(this,l),l.onEnd=i.bind(this,l),l.pushOneRaphaelVector=s.bind(this,l),l.updateScale=t.bind(this,l),l.updateRotation=e.bind(this,l),l.updateTranslation=n.bind(this,l),h.set(this,l)}var h=new WeakMap;o.prototype={scale:function(t,e){var n=h.get(this);return void 0==e&&(e=t),n.updateScale(t,e),this},rotate:function(t){var e=h.get(this);return e.updateRotation(t),this},translate:function(t,e){var n=h.get(this);return n.updateTranslation(t,e),this},push:function(t){var e=h.get(this);return e.pushOneRaphaelVector(t),this},getBBox:function(){h.get(this);return this.set.getBBox()},draggable:function(){var t=h.get(this);return this.set.drag(t.onMove,t.onStart,t.onEnd),this}},Raphael.fn.group=function(){var t=Array.isArray(arguments[0]),e=(t?{}:arguments[0],arguments[t?0:1]);return new o(this,e)}}();