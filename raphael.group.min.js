!function(){"use strict";function t(t,e,n,r){var a="scale("+n+" "+r+")";return e?e.indexOf("scale(")<0?e+" "+a:e.replace(/scale\(-?[0-9]*?\.?[0-9]*?\ -?[0-9]*?\.?[0-9]*?\)/,a):a}function e(t,e,n){var r="rotate("+n+")";return e?e.indexOf("rotate(")<0?e+" "+r:e.replace(/rotate\(-?[0-9]+(\.[0-9][0-9]*)?\)/,r):r}function n(t,e,n,r){var a="translate("+n+" "+r+")";return e?e.indexOf("translate(")<0?e+" "+a:e.replace(/translate\(-?[0-9]*?\.?[0-9]*?\ -?[0-9]*?\.?[0-9]*?\)/,a):a}function r(t,e,n){t.lx=e*this.dragSpeed+t.ox,t.ly=n*this.dragSpeed+t.oy,this.translate(t.lx,t.ly)}function a(t){if(this.node.hasAttribute("transform")){var e=this.node.getAttribute("transform").match(/translate\(([^)]*)\)/);if(e&&void 0!==e[1]){var n=e[1].split(" ");t.ox=parseInt(n[0]),t.oy=parseInt(n[1])}}}function i(t){t.ox=t.lx,t.oy=t.ly}function s(t,e){var n;if("set"===e.type)for(n=0;n<e.length;n++)s.apply(this,[t,e[n]]);else this.node.appendChild(e.node),this.set.push(e)}function o(o,u){var d=o.raphael.vml?document.createElement("group"):document.createElementNS("http://www.w3.org/2000/svg","g");o.canvas.appendChild(d),this.set=o.set(u),this.dragSpeed=1,this.node=d,this.type="group";var l={lx:0,ly:0,ox:0,oy:0};l.onMove=r.bind(this,l),l.onStart=a.bind(this,l),l.onEnd=i.bind(this,l),l.pushOneRaphaelVector=s.bind(this,l),l.updateScale=t.bind(this,l),l.updateRotation=e.bind(this,l),l.updateTranslation=n.bind(this,l),h.set(this,l)}var h=new WeakMap;o.prototype={scale:function(t,e){var n=h.get(this);return void 0==e&&(e=t),this.node.setAttribute("transform",n.updateScale(this.node.getAttribute("transform"),t,e)),this},rotate:function(t){var e=h.get(this);return this.node.setAttribute("transform",e.updateRotation(this.node.getAttribute("transform"),t)),this},push:function(t){var e=h.get(this);return e.pushOneRaphaelVector(t),this},translate:function(t,e){var n=h.get(this);return this.node.setAttribute("transform",n.updateTranslation(this.node.getAttribute("transform"),t,e)),this},getBBox:function(){h.get(this);return this.set.getBBox()},draggable:function(){var t=h.get(this);return this.set.drag(t.onMove,t.onStart,t.onEnd),this}},Raphael.fn.group=function(){var t=Array.isArray(arguments[0]),e=(t?{}:arguments[0],arguments[t?0:1]);return new o(this,e)}}();